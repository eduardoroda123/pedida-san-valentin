<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para ti â¤ï¸</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="card">
        <div class="photo-container">
            <!-- 
                INSTRUCCIONES:
                1. Guarda tu foto en la carpeta 'fotos' que he creado.
                2. Nombra la foto exactamente como: 'nosotros.jpg'
                3. Â¡Listo! Se mostrarÃ¡ automÃ¡ticamente.
            -->
            <img id="mainPhoto" src="fotos/ranas-dandose-la.mano.jpeg" alt="Nosotros"
                onerror="this.onerror=null; this.src='https://media.giphy.com/media/26BRv0ThflsHCqDrG/giphy.gif';">
        </div>

        <div id="quiz-section">
            <h1 id="question">Â¿Quieres ser mi San ValentÃ­n? ğŸ’™</h1>
            <p>Prometo que no serÃ¡ el Ãºltimo :)</p>
            <div class="buttons">
                <button id="yesBtn">Â¡SÃ!</button>
                <button id="noBtn">No (intÃ©ntalo)</button>
            </div>
            <p id="timid-message" style="opacity: 0.6; font-size: 0.9rem; margin-top: 20px;">El botÃ³n "No" parece
                tÃ­mido... ğŸ™ˆ</p>
        </div>

        <div id="success-message">
            <h1>Â¡SabÃ­a que dirÃ­as que sÃ­! ğŸ’™</h1>
            <p>Eres lo mejor que me ha pasado.<br>Te amo muchÃ­simo.</p>
            <div class="photo-container" style="height: 150px; margin-top: 20px;">
                <img src="https://media.giphy.com/media/MDJ9IbxxvDUQM/giphy.gif" alt="Happy Cat">
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
        const yesBtn = document.querySelector('#yesBtn');
        const noBtn = document.querySelector('#noBtn');
        const quizSection = document.querySelector('#quiz-section');
        const successMessage = document.querySelector('#success-message');

        // LA SOLUCIÃ“N NUCLEAR: Sacar el botÃ³n al body
        const moverBoton = () => {
            // 1. En el primer movimiento, lo sacamos al body para que no le afecten los padres
            if (noBtn.parentNode !== document.body) {
                document.body.appendChild(noBtn);
            }

            // 2. Forzamos fixed
            noBtn.style.position = 'fixed';
            noBtn.style.zIndex = '10000';

            // 3. Medidas del viewport (espacio visible)
            const vw = window.innerWidth;
            const vh = window.innerHeight;

            // 4. Medidas del botÃ³n
            const btnWidth = noBtn.offsetWidth;
            const btnHeight = noBtn.offsetHeight;

            // 5. MARGEN DE SEGURIDAD: 10% de la pantalla para que nunca toque los bordes
            const marginX = vw * 0.1;
            const marginY = vh * 0.1;

            // 6. Rango de movimiento (X entre 10% y 90%, Y entre 10% y 90%)
            const minX = marginX;
            const maxX = vw - btnWidth - marginX;
            const minY = marginY;
            const maxY = vh - btnHeight - marginY;

            // 7. CÃ¡lculo de posiciÃ³n aleatoria
            const randomX = Math.random() * (maxX - minX) + minX;
            const randomY = Math.random() * (maxY - minY) + minY;

            // 8. Aplicamos
            noBtn.style.left = randomX + 'px';
            noBtn.style.top = randomY + 'px';
        };

        // Eventos
        noBtn.addEventListener('mouseenter', moverBoton);
        noBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            moverBoton();
        });

        // LÃ³gica del botÃ³n "SÃ­"
        yesBtn.addEventListener('click', () => {
            // Efecto de Confeti
            const duration = 3000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

            const randomInRange = (min, max) => Math.random() * (max - min) + min;

            const interval = setInterval(function () {
                const timeLeft = animationEnd - Date.now();

                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }

                const particleCount = 50 * (timeLeft / duration);

                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
            }, 250);

            // Cambiar vista
            quizSection.style.display = 'none';
            noBtn.style.display = 'none'; // ocultamos el boton rebelde
            document.getElementById('timid-message').style.display = 'none';
            successMessage.style.display = 'block';
        });
    </script>
</body>

</html>